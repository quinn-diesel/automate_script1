import json
import time
import random
import string

from functools import reduce


def random_letters_numbers(size):
    return ''.join(random.choices(string.ascii_uppercase + string.digits, k=size))


def remove_empty_values(d):
    return {k: remove_empty_values(v) if isinstance(v, dict) else v for k, v in d.items() if v != ''}


def deep_get(dictionary, keys, default=None):
    '''Convenience function to safely get values from a nested dictionary'''
    return reduce(
        lambda d, key: d.get(key, default) if isinstance(d, dict) else default,
        keys.split('.'),
        dictionary,
    )
